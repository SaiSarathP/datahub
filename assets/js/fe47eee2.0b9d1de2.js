"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[1935],{4137:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(n),m=o,h=u["".concat(s,".").concat(m)]||u[m]||d[m]||i;return n?a.createElement(h,r(r({ref:t},c),{},{components:n})):a.createElement(h,r({ref:t},c))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,r[1]=l;for(var p=2;p<i;p++)r[p]=n[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},2565:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return c},default:function(){return u}});var a=n(7462),o=n(3366),i=(n(7294),n(4137)),r=["components"],l={title:"OpenApi Metadata",sidebar_label:"OpenApi Metadata",slug:"/metadata-ingestion/source_docs/openapi",custom_edit_url:"https://github.com/linkedin/datahub/blob/master/metadata-ingestion/source_docs/openapi.md"},s="OpenApi Metadata",p={unversionedId:"metadata-ingestion/source_docs/openapi",id:"metadata-ingestion/source_docs/openapi",isDocsHomePage:!1,title:"OpenApi Metadata",description:"This plugin is meant to gather dataset-like informations about OpenApi Endpoints.",source:"@site/genDocs/metadata-ingestion/source_docs/openapi.md",sourceDirName:"metadata-ingestion/source_docs",slug:"/metadata-ingestion/source_docs/openapi",permalink:"/docs/metadata-ingestion/source_docs/openapi",editUrl:"https://github.com/linkedin/datahub/blob/master/metadata-ingestion/source_docs/openapi.md",tags:[],version:"current",frontMatter:{title:"OpenApi Metadata",sidebar_label:"OpenApi Metadata",slug:"/metadata-ingestion/source_docs/openapi",custom_edit_url:"https://github.com/linkedin/datahub/blob/master/metadata-ingestion/source_docs/openapi.md"},sidebar:"overviewSidebar",previous:{title:"Okta",permalink:"/docs/metadata-ingestion/source_docs/okta"},next:{title:"Oracle",permalink:"/docs/metadata-ingestion/source_docs/oracle"}},c=[{value:"Setup",id:"setup",children:[],level:2},{value:"Capabilities",id:"capabilities",children:[{value:"Automatically recorded examples",id:"automatically-recorded-examples",children:[],level:3},{value:"Automatic guessing of IDs",id:"automatic-guessing-of-ids",children:[],level:3}],level:2},{value:"Config details",id:"config-details",children:[{value:"Getting dataset metadata from <code>forced_example</code>",id:"getting-dataset-metadata-from-forced_example",children:[],level:3}],level:2}],d={toc:c};function u(e){var t=e.components,n=(0,o.Z)(e,r);return(0,i.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"openapi-metadata"},"OpenApi Metadata"),(0,i.kt)("p",null,"This plugin is meant to gather dataset-like informations about OpenApi Endpoints."),(0,i.kt)("p",null,"As example, if by calling GET at the endpoint at ",(0,i.kt)("inlineCode",{parentName:"p"},"https://test_endpoint.com/api/users/")," you obtain as result:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-JSON"},'[{"user": "albert_physics",\n  "name": "Albert Einstein",\n  "job": "nature declutterer",\n  "is_active": true},\n  {"user": "phytagoras",\n  "name": "Phytagoras of Kroton",\n  "job": "Phylosopher on steroids", \n  "is_active": true}\n]\n')),(0,i.kt)("p",null,"in Datahub you will see a dataset called ",(0,i.kt)("inlineCode",{parentName:"p"},"test_endpoint/users")," which contains as fields ",(0,i.kt)("inlineCode",{parentName:"p"},"user"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"name")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"job"),"."),(0,i.kt)("h2",{id:"setup"},"Setup"),(0,i.kt)("p",null,"To install this plugin, run ",(0,i.kt)("inlineCode",{parentName:"p"},"pip install 'acryl-datahub[openapi]'"),"."),(0,i.kt)("p",null,"Example of configuration file:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"source:\n  type: openapi\n  config:\n    name: test_endpoint # this name will appear in DatHub\n    url: https://test_endpoint.com/\n    swagger_file: classicapi/doc/swagger.json  # where to search for the OpenApi definitions\n    get_token: True  # optional, if you need to get an authentication token beforehand \n    username: your_username  # optional\n    password: your_password  # optional\n    forced_examples:  # optionals\n      /accounts/groupname/{name}: test\n      /accounts/username/{name}: test\n    ignore_endpoints: [/ignore/this, /ignore/that, /also/that_other]  # optional, the endpoints to ignore\n\nsink:\n  type: \"datahub-rest\"\n  config:\n    server: 'http://localhost:8080'\n")),(0,i.kt)("p",null,"The dataset metadata should be defined directly in the Swagger file, section ",(0,i.kt)("inlineCode",{parentName:"p"},'["example"]'),". If this is not true, the following procedures will take place."),(0,i.kt)("h2",{id:"capabilities"},"Capabilities"),(0,i.kt)("p",null,"The plugin read the swagger file where the endopints are defined and searches for the ones which accept\na ",(0,i.kt)("inlineCode",{parentName:"p"},"GET")," call: those are the ones supposed to give back the datasets."),(0,i.kt)("p",null,"For every selected endpoint defined in the ",(0,i.kt)("inlineCode",{parentName:"p"},"paths")," section,\nthe tool searches whether the medatada are already defined in there.",(0,i.kt)("br",{parentName:"p"}),"\n","As example, if in your swagger file there is the ",(0,i.kt)("inlineCode",{parentName:"p"},"/api/users/")," defined as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},'paths:\n  /api/users/:\n    get:\n      tags: [ "Users" ]\n      operationID: GetUsers\n      description: Retrieve users data\n      responses:\n        \'200\':\n          description: Return the list of users\n          content:\n            application/json:\n              example:\n                {"user": "username", "name": "Full Name", "job": "any", "is_active": True}\n')),(0,i.kt)("p",null,"then this plugin has all the information needed to create the dataset in DataHub."),(0,i.kt)("p",null,"In case there is no example defined, the plugin will try to get the metadata directly from the endpoint.\nSo, if in your swagger file you have"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"paths:\n  /colors/:\n    get:\n      tags: [ \"Colors\" ]\n      operationID: GetDefinedColors\n      description: Retrieve colors\n      responses:\n        '200':\n          description: Return the list of colors\n")),(0,i.kt)("p",null,"the tool will make a ",(0,i.kt)("inlineCode",{parentName:"p"},"GET")," call to ",(0,i.kt)("inlineCode",{parentName:"p"},"https:///test_endpoint.com/colors"),"\nand parse the response obtained."),(0,i.kt)("h3",{id:"automatically-recorded-examples"},"Automatically recorded examples"),(0,i.kt)("p",null,"Sometimes you can have an endpoint which wants a parameter to work, like\n",(0,i.kt)("inlineCode",{parentName:"p"},"https://test_endpoint.com/colors/{color}"),"."),(0,i.kt)("p",null,"Since in the OpenApi specifications the listing endpoints are specified\njust before the detailed ones, in the list of the paths, you will find"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"https:///test_endpoint.com/colors\n")),(0,i.kt)("p",null,"defined before"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"https://test_endpoint.com/colors/{color}\n")),(0,i.kt)("p",null,"This plugin is set to automatically keep an example of the data given by the first URL,\nwhich with some probability will include an example of attribute needed by the second."),(0,i.kt)("p",null,"So, if by calling GET to the first URL you get as response:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{"pantone code": 100,\n "color": "yellow",\n ...}\n')),(0,i.kt)("p",null,"the ",(0,i.kt)("inlineCode",{parentName:"p"},'"color": "yellow"'),"  part will be used to complete the second link, which\nwill become:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"https://test_endpoint.com/colors/yellow\n")),(0,i.kt)("p",null,"and this last URL will be called to get back the needed metadata."),(0,i.kt)("h3",{id:"automatic-guessing-of-ids"},"Automatic guessing of IDs"),(0,i.kt)("p",null,"If no useful example is found, a second procedure will try to guess a numerical ID.\nSo if we have:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"https:///test_endpoint.com/colors/{colorID}\n")),(0,i.kt)("p",null,"and there is no ",(0,i.kt)("inlineCode",{parentName:"p"},"colorID")," example already found by the plugin,\nit will try to put a number one (1) at the parameter place"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"https://test_endpoint.com/colors/1\n")),(0,i.kt)("p",null,"and this URL will be called to get back the needed metadata."),(0,i.kt)("h2",{id:"config-details"},"Config details"),(0,i.kt)("h3",{id:"getting-dataset-metadata-from-forced_example"},"Getting dataset metadata from ",(0,i.kt)("inlineCode",{parentName:"h3"},"forced_example")),(0,i.kt)("p",null,"Suppose you have an endpoint defined in the swagger file, but without example given, and the tool is\nunable to guess the URL. In such cases you can still manually specify it in the ",(0,i.kt)("inlineCode",{parentName:"p"},"forced_examples")," part of the\nconfiguration file. "),(0,i.kt)("p",null,"As example, if in your swagger file you have"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"paths:\n  /accounts/groupname/{name}/:\n    get:\n      tags: [ \"Groups\" ]\n      operationID: GetGroup\n      description: Retrieve group data\n      responses:\n        '200':\n          description: Return details about the group\n")),(0,i.kt)("p",null,"and the plugin did not found an example in its previous calls,\nso the tool have no idea about what substitute to the ",(0,i.kt)("inlineCode",{parentName:"p"},"{name}")," part."),(0,i.kt)("p",null,"By specifying in the configuration file"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"    forced_examples:  # optionals\n      /accounts/groupname/{name}: test\n")),(0,i.kt)("p",null,"the plugin is able to build a correct URL, as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"https://test_endpoint.com/accounts/groupname/test\n")))}u.isMDXComponent=!0}}]);